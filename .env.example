EMBEDDING_PROVIDER_TYPE=http
LLM_PROVIDER_TYPE=http
RERANKER_PROVIDER_TYPE=http


# Embedding model
EMBEDDING_MODEL=BAAI/bge-m3
EMBEDDING_DEVICE=cpu
EMBEDDING_BATCH_SIZE=32

# LLM model
LLM_MODEL=Phi3:mini
LLM_DEVICE=cpu
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=1024

# Reranker model
RERANKER_MODEL=BAAI/bge-reranker-v2-m3
RERANKER_ENABLED=true
RERANKER_TOP_K=10

# RAG Quality Optimization

# Semantic-aware chunking (enable to improve accuracy)
SEMANTIC_CHUNKING=true
CHUNK_SIZE=512          # Optimal for BGE-M3: 512–768 tokens
CHUNK_OVERLAP=50        # Semantic overlap

# Hybrid retrieval configuration
HYBRID_SEARCH_ENABLED=true
BM25_WEIGHT=0.3
VECTOR_WEIGHT=0.7

# Retrieval parameters
RETRIEVAL_TOP_K=10      # Retrieve candidates first
LLM_RELEVANCE_THRESHOLD=0.4

# Cache configuration (significantly improves repeated query speed)
CACHE_EMBEDDINGS=true
CACHE_DIR=/storage/cache

# Embedding instructions (fine-tuned for BGE-M3)
EMBEDDING_QUERY_INSTRUCTION=Represent this sentence for searching relevant passages:
EMBEDDING_PASSAGE_INSTRUCTION=

# Qdrant Vector Database Optimization

QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION=documents
VECTOR_DIMENSION=1024

# HNSW parameter tuning (affects search accuracy and speed)
# Small dataset (<100K): m=16, ef_construct=200, ef_search=100
# Medium dataset (100K–1M): m=16, ef_construct=400, ef_search=200
# Large dataset (>1M): m=8, ef_construct=200, ef_search=100

QDRANT_HNSW_M=16
QDRANT_HNSW_EF_CONSTRUCT=200
QDRANT_HNSW_EF_SEARCH=100

# Service

MODEL_SERVICE_URL=http://model-service:8002
LOG_LEVEL=INFO

# Storage directory
STORAGE_DIR=/storage


# Production environment (best quality)
SEMANTIC_CHUNKING=true
HYBRID_SEARCH_ENABLED=true
RERANKER_ENABLED=true
CACHE_EMBEDDINGS=true
QDRANT_HNSW_M=16
QDRANT_HNSW_EF_CONSTRUCT=400

# Development environment (balanced)
SEMANTIC_CHUNKING=true
HYBRID_SEARCH_ENABLED=true
RERANKER_ENABLED=false
CACHE_EMBEDDINGS=true
QDRANT_HNSW_M=16
QDRANT_HNSW_EF_CONSTRUCT=200

# Resource-constrained environment (lightweight)
SEMANTIC_CHUNKING=false
HYBRID_SEARCH_ENABLED=true
RERANKER_ENABLED=false
CACHE_EMBEDDINGS=true
EMBEDDING_BATCH_SIZE=8
QDRANT_HNSW_M=8
